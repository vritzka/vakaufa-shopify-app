<script src="https://d1kr663wima0pv.cloudfront.net/vakaufa.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof Assistor !== 'undefined' && Assistor.config) {
      Assistor.config.country = {{ localization.country.iso_code | json}};
      Assistor.config.position = {{ block.settings.chat_position | json }};
      Assistor.config.color = {{ block.settings.chat_color | json }};
      Assistor.config.assistorId = {{ app.metafields.assistor.assistor_id | json }};
      Assistor.config.initialGreeting = {{ block.settings.initial_greeting | json }};
      Assistor.config.width = {{ block.settings.chat_width | json }};
      Assistor.config.height = {{ block.settings.chat_height | json }};
      Assistor.config.icon = {{ block.settings.chat_icon | json }};
      Assistor.config.forceConversation = {{ block.settings.auto_open | json }};

      Assistor.init();
      
    }
  });
</script>

{% schema %}
{
  "name": "Verkaufer",
  "target": "body",
  "settings": [
    {
      "type": "select",
      "id": "chat_position",
      "label": "Chat Position",
      "options": [
        { "value": "bottom-right", "label": "Bottom Right" },
        { "value": "bottom-left", "label": "Bottom Left" },
        { "value": "top-right", "label": "Top Right" },
        { "value": "top-left", "label": "Top Left" }
      ],
      "default": "bottom-right",
      "info": "Choose where the chat widget will appear on the page. This affects the position of both the chat icon and the chat window."
    },
    {
      "type": "color",
      "id": "chat_color",
      "label": "Icon Color",
      "default": "#007bff",
      "info": "Select the primary color for the chat widget. This color will be used for the chat icon background and other UI elements."
    },
    {
      "type": "number",
      "id": "chat_width",
      "label": "Chat Width (px)",
      "default": 450,
      "info": "Set the width of the chat window in pixels. If the screen is smaller, the width will automatically adjust."
    },
    {
      "type": "number",
      "id": "chat_height",
      "label": "Chat Height (px)",
      "default": 600,
      "info": "Set the height of the chat window in pixels. If the screen is smaller, the height will automatically adjust."
    },
    {
      "type": "text",
      "id": "chat_icon",
      "label": "Chat Icon (Emoji)",
      "default": "üí¨",
      "info": "Enter an emoji to use as the chat icon. This will be displayed on the chat button. For example: üí¨, ü§ñ, or üó®Ô∏è"
    },
    {
      "type": "checkbox",
      "id": "auto_open",
      "label": "Auto Open Chat",
      "default": false,
      "info": "If checked, the chat will automatically open on page load. Note: This may slow down page load times."
    }
  ]
}
{% endschema %}

